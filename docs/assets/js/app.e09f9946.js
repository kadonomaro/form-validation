(function(t){function e(e){for(var a,n,r=e[0],u=e[1],o=e[2],c=0,m=[];c<r.length;c++)n=r[c],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&m.push(s[n][0]),s[n]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);p&&p(e);while(m.length)m.shift()();return l.push.apply(l,o||[]),i()}function i(){for(var t,e=0;e<l.length;e++){for(var i=l[e],a=!0,r=1;r<i.length;r++){var u=i[r];0!==s[u]&&(a=!1)}a&&(l.splice(e--,1),t=n(n.s=i[0]))}return t}var a={},s={app:0},l=[];function n(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=a,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/form-validation/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var p=u;l.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"045f":function(t,e,i){},1776:function(t,e,i){},"1a18":function(t,e,i){"use strict";var a=i("53bb"),s=i.n(a);s.a},"299f":function(t,e,i){"use strict";var a=i("8c35"),s=i.n(a);s.a},"53bb":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);var a=i("a026"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("main-layout")],1)},l=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("main",{staticClass:"main-layout"},[i("app-form")],1)},r=[],u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-form"},[t._m(0),i("div",{staticClass:"app-form__body"},[i("form",{attrs:{action:""}},[i("label",{staticClass:"app-form__field"},[i("span",{staticClass:"app-form__caption"},[t._v("Сумма инвестиции")]),i("sum-invest-input",{on:{"change-value":t.updateInvestSum}})],1),i("label",{staticClass:"app-form__field"},[i("span",{staticClass:"app-form__caption"},[t._v("Мультипликатор")]),i("mult-invest-input",{attrs:{sum:t.formData.sumInv},on:{"change-value":t.updateInvestMult}})],1),i("span",{staticClass:"app-form__spoiler-toggle",class:{"app-form__spoiler-toggle--active":t.isActiveSpoiler},on:{click:t.spoilerToggle}},[t._v("Ограничить прибыль и убыток")]),i("transition",{attrs:{name:"slide"}},[t.isActiveSpoiler?i("div",{staticClass:"app-form__spoiler"},[i("label",{staticClass:"app-form__field app-form__field--indent"},[i("span",{staticClass:"app-form__caption"},[t._v("Ограничения в")]),i("limit-types-input",{attrs:{limitType:t.currentLimitType},on:{"limits-type":t.updateLimitType}})],1),i("div",{staticClass:"app-form__field"},[i("limit-value-input",{attrs:{title:"Прибыль",limitType:t.currentLimitType,type:"profit",initialValue:t.formData.sumInv},on:{"change-value":t.updateLimitValue,"active-state":t.updateLimitState}})],1),i("div",{staticClass:"app-form__field app-form__field--indent"},[i("limit-value-input",{attrs:{title:"Убыток",limitType:t.currentLimitType,type:"loss",initialValue:t.formData.sumInv},on:{"change-value":t.updateLimitValue,"active-state":t.updateLimitState}})],1)]):t._e()]),i("div",{staticClass:"app-form__field app-form__field--inner-indent"},[i("send-button",{attrs:{buttonType:"reduction",title:"В снижение"},on:{"send-request":t.sendRequest}}),i("send-button",{attrs:{buttonType:"growth",title:"В рост"},on:{"send-request":t.sendRequest}})],1)],1)])])},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"app-form__header"},[i("span",{staticClass:"app-form__title"},[t._v("Инвестировать сейчас")])])}],p=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"input-label",attrs:{"data-sign":"$"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"input sum-invest-input",class:{"input--error":t.validate},attrs:{type:"text"},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},function(e){return t.updateInvestValue(+e.target.value)}]}}),i("app-tooltip",{attrs:{message:"Минимальная сумма инвестиции $ 100",isActive:t.validate}})],1)},c=[],m=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isActive?i("div",{staticClass:"app-tooltip"},[i("span",{staticClass:"app-tooltip__message"},[t._v(t._s(t.message))])]):t._e()},d=[],v={name:"AppTooltip",props:{message:{type:String,required:!0},isActive:{type:Boolean,required:!0}}},f=v,h=(i("299f"),i("2877")),_=Object(h["a"])(f,m,d,!1,null,null,null),y=_.exports,b={name:"SumInvestInput",components:{AppTooltip:y},data(){return{value:5e3,isValid:!0}},methods:{updateInvestValue(t){t<0?t=0:t>=2e5&&(t=2e5),this.value=+t.toString().replace(/[A-Z a-z]/g,""),this.$emit("change-value",this.value,!this.validate)}},computed:{validate(){return this.value<100}}},g=b,V=(i("9f9e"),Object(h["a"])(g,p,c,!1,null,null,null)),C=V.exports,S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("label",{staticClass:"input-label",attrs:{"data-sign":"x"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.multiplyValue,expression:"multiplyValue"}],staticClass:"input mult-invest-input",class:{"input--error":t.validate},attrs:{type:"text"},domProps:{value:t.multiplyValue},on:{input:[function(e){e.target.composing||(t.multiplyValue=e.target.value)},function(e){return t.updateMultiplyValue(+e.target.value)}],focus:t.openSlider}}),i("app-tooltip",{attrs:{message:"Неверное значение мультипликатора",isActive:t.validate}}),i("span",{staticClass:"mult-invest-sum",class:{"mult-invest-sum--small":t.isLong}},[t._v("= $ "+t._s(t._f("currency")(t.sum*t.multiplyValue||0))+" ")]),t.isRangeVisible?i("div",{directives:[{name:"escape",rawName:"v-escape",value:t.closeSlider,expression:"closeSlider"}],staticClass:"mult-invest-range"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.multiplyValue,expression:"multiplyValue"}],staticClass:"mult-invest-range__slider",attrs:{type:"range",min:"1",max:"40",step:"1"},domProps:{value:t.multiplyValue},on:{input:function(e){return t.updateMultiplyValue(+e.target.value)},__r:function(e){t.multiplyValue=e.target.value}}}),t._m(0)]):t._e()],1)},L=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mult-invest-range__tick-list"},[i("span",{staticClass:"mult-invest-range__tick",staticStyle:{left:"0"}},[t._v("1")]),i("span",{staticClass:"mult-invest-range__tick",staticStyle:{left:"12.5%"}},[t._v("5")]),i("span",{staticClass:"mult-invest-range__tick",staticStyle:{left:"50%",transform:"translateX(-50%)"}},[t._v("20")]),i("span",{staticClass:"mult-invest-range__tick",staticStyle:{left:"95%"}},[t._v("40")])])}],T={name:"MultInvestInput",components:{AppTooltip:y},props:{sum:{type:Number,required:!0}},data(){return{isRangeVisible:!1,multiplyValue:40}},methods:{openSlider(){this.isRangeVisible=!0},closeSlider(){this.isRangeVisible=!1},updateMultiplyValue(t){t<0?t=0:t>99&&(t=99),this.multiplyValue=+t.toString().replace(/[A-Z a-z]/g,""),this.$emit("change-value",this.multiplyValue,!this.validate)}},computed:{isLong(){return(this.sum*this.multiplyValue).toString().length>6},validate(){return this.multiplyValue<1||this.multiplyValue>40}}},x=T,I=(i("c00d"),Object(h["a"])(x,S,L,!1,null,null,null)),w=I.exports,D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"input-label limit-types"},[i("label",{staticClass:"limit-types__label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentLimit,expression:"currentLimit"}],staticClass:"limit-types__radio visually-hidden",attrs:{type:"radio",value:"percent"},domProps:{checked:t._q(t.currentLimit,"percent")},on:{change:[function(e){t.currentLimit="percent"},t.updateLimitsType]}}),i("span",{staticClass:"limit-types__radio-custom"}),i("span",{staticClass:"limit-types__title"},[t._v("%")])]),i("label",{staticClass:"limit-types__label"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentLimit,expression:"currentLimit"}],staticClass:"limit-types__radio visually-hidden",attrs:{type:"radio",value:"dollar"},domProps:{checked:t._q(t.currentLimit,"dollar")},on:{change:[function(e){t.currentLimit="dollar"},t.updateLimitsType]}}),i("span",{staticClass:"limit-types__radio-custom"}),i("span",{staticClass:"limit-types__title"},[t._v("$")])])])},k=[],$={name:"LimitTypesInput",props:{limitType:{type:String,required:!1}},data(){return{currentLimit:this.limitType||"dollar"}},methods:{updateLimitsType(){this.$emit("limits-type",this.currentLimit)}}},O=$,j=(i("d8aa"),Object(h["a"])(O,D,k,!1,null,null,null)),A=j.exports,P=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"limit-value"},[i("label",{staticClass:"limit-value__label"},[i("input",{staticClass:"limit-value__checkbox visually-hidden",attrs:{type:"checkbox"},on:{change:t.toggleState}}),i("span",{staticClass:"limit-value__checkbox-custom"}),i("span",{staticClass:"limit-value__title"},[t._v(t._s(t.title))])]),i("label",{staticClass:"input-label",attrs:{"data-sign":t.setSign}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"input input--button limit-value__input",class:{"input--disabled":t.isDisabled,"input--error":!t.isValid},attrs:{type:"text",disabled:t.isDisabled},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},function(e){return t.updateLimitValue(+e.target.value)}]}}),i("app-tooltip",{attrs:{message:t.errorMessage,isActive:!t.isValid}}),i("div",{staticClass:"limit-value__buttons"},[i("button",{staticClass:"limit-value__button limit-value__button--up",class:{"limit-value__button--disabled":t.isDisabled},attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.increaseValue(e)}}}),i("button",{staticClass:"limit-value__button limit-value__button--down",class:{"limit-value__button--disabled":t.isDisabled},attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.decreaseValue(e)}}})])],1)])},q=[],M={name:"LimitValueInput",components:{AppTooltip:y},props:{title:{type:String,required:!0},limitType:{type:String,required:!0},type:{type:String,required:!0},initialValue:{type:Number,required:!0}},data(){return{isDisabled:!0,value:0,step:10,errorMessage:"",isValid:!0}},mounted(){this.setInitialValue(),this.emitChange()},updated(){this.emitChange()},methods:{setInitialValue(){"dollar"===this.limitType?this.value=.3*this.initialValue:this.value=30},toggleState(){this.isDisabled=!this.isDisabled,this.$emit("active-state",!this.isDisabled,this.type)},increaseValue(){this.value+=this.step,this.emitChange()},decreaseValue(){this.value-=this.step,this.emitChange(),this.value<0&&(this.value=0)},updateLimitValue(t){t<0&&(t=0),this.value=+t.toString().replace(/[A-Z a-z]/g,"")},emitChange(){this.$emit("change-value","dollar"===this.limitType?this.value:+(this.initialValue*this.value/100).toFixed(0),this.type,this.isValid)}},computed:{setSign(){return"dollar"===this.limitType?"$":"%"}},watch:{limitType(){"dollar"===this.limitType?(this.value=.3*this.initialValue,this.step=10):(this.value=30,this.step=1)},initialValue(){"dollar"===this.limitType&&(.3*this.initialValue===parseInt(.3*this.initialValue,10)?this.value=.3*this.initialValue:this.value=(.3*this.initialValue).toFixed(2))},value(){switch(this.limitType){case"percent":this.value<10?(this.isValid=!1,this.errorMessage="Не может быть меньше 10%"):this.isValid=!0,"loss"===this.type&&this.value>100&&(this.isValid=!1,this.errorMessage="Не может быть больше 100%");break;case"dollar":this.value<this.initialValue/10?(this.isValid=!1,this.errorMessage="Не может быть меньше $ "+this.initialValue/10):this.isValid=!0,"loss"===this.type&&this.value>this.initialValue&&(this.isValid=!1,this.errorMessage="Не может быть больше $ "+this.initialValue);break}}}},E=M,N=(i("61bf"),Object(h["a"])(E,P,q,!1,null,null,null)),R=N.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{staticClass:"send-button",class:t.buttonType?"send-button--"+t.buttonType:"",on:{click:function(e){return e.preventDefault(),t.send(e)}}},[i("span",{staticClass:"send-button__inner"},[t._v(t._s(t.title))])])},F=[],z={name:"SendButton",props:{buttonType:{type:String,required:!0},title:{type:String,required:!0}},methods:{send(){this.$emit("send-request",this.buttonType)}}},Z=z,J=(i("1a18"),Object(h["a"])(Z,B,F,!1,null,null,null)),U=J.exports,X=i("bc3a"),G=i.n(X),H={name:"AppForm",components:{SumInvestInput:C,MultInvestInput:w,LimitTypesInput:A,LimitValueInput:R,SendButton:U},props:{},data(){return{currentLimitType:"dollar",isActiveSpoiler:!1,formData:{sumInv:5e3,mult:40,takeProfit:0,stopLoss:0,direction:""},formSendValidation:{sumInv:!0,mult:!0,takeProfit:!0,stopLoss:!0},limitState:{profit:!1,loss:!1},serverUrl:"https://jsonplaceholder.typicode.com/posts"}},methods:{updateInvestSum(t,e){this.formData.sumInv=t,this.formSendValidation.sumInv=e,this.formData.sumInv>2e5&&(this.formData.sumInv=2e5)},updateInvestMult(t,e){this.formData.mult=t,this.formSendValidation.mult=e},updateLimitType(t){this.currentLimitType=t},updateLimitState(t,e){this.limitState[e]=t},updateLimitValue(t,e,i){"profit"===e?(this.formData.takeProfit=t,this.formSendValidation.takeProfit=i):(this.formData.stopLoss=t,this.formSendValidation.stopLoss=i)},sendRequest(t){this.formData.direction=t,Object.values(this.formSendValidation).every(Boolean)&&G()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:this.serverUrl,data:{sumInv:this.formData.sumInv,mult:this.formData.mult,...this.limitState.profit&&{takeProfit:this.formData.takeProfit},...this.limitState.loss&&{stopLoss:this.formData.stopLoss},direction:this.formData.direction}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))},spoilerToggle(){this.isActiveSpoiler=!this.isActiveSpoiler}}},K=H,Q=(i("fa45"),Object(h["a"])(K,u,o,!1,null,null,null)),W=Q.exports,Y={components:{AppForm:W}},tt=Y,et=(i("89d3"),Object(h["a"])(tt,n,r,!1,null,null,null)),it=et.exports,at={name:"app",components:{MainLayout:it}},st=at,lt=(i("5c0b"),Object(h["a"])(st,s,l,!1,null,null,null)),nt=lt.exports,rt=(i("045f"),{bind(t,e){function i(t){if(27===event.keyCode&&(e.value(),"function"!==typeof e.value))throw new Error("Argument must be a function")}document.addEventListener("keydown",i)},unbind(){document.removeEventListener("keydown",close)}}),ut=function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")};a["a"].config.productionTip=!1,a["a"].directive("escape",rt),a["a"].filter("currency",ut),new a["a"]({render:function(t){return t(nt)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),s=i.n(a);s.a},"61bf":function(t,e,i){"use strict";var a=i("edc7"),s=i.n(a);s.a},"89d3":function(t,e,i){"use strict";var a=i("1776"),s=i.n(a);s.a},"8c35":function(t,e,i){},"8e9a":function(t,e,i){},"9c0c":function(t,e,i){},"9f9e":function(t,e,i){"use strict";var a=i("c2fc"),s=i.n(a);s.a},be63:function(t,e,i){},c00d:function(t,e,i){"use strict";var a=i("dbda"),s=i.n(a);s.a},c2fc:function(t,e,i){},d8aa:function(t,e,i){"use strict";var a=i("8e9a"),s=i.n(a);s.a},dbda:function(t,e,i){},edc7:function(t,e,i){},fa45:function(t,e,i){"use strict";var a=i("be63"),s=i.n(a);s.a}});
//# sourceMappingURL=app.e09f9946.js.map